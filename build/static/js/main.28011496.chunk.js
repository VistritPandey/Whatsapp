(this["webpackJsonpwhatsapp-clone"]=this["webpackJsonpwhatsapp-clone"]||[]).push([[0],{64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},75:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var c=a(4),s=a(2),n=a.n(s),i=a(25),r=a.n(i),o=(a(64),a(13)),j=a(30),d=a(9),l=(a(65),a(98)),h=a(91),b=(a(66),a(92)),u=a(93),m=a(94),O=a(95),p=a(96),x=a(27),f=x.a.initializeApp({apiKey:"AIzaSyC78AYPs8Zt3pQipVeVYmjr1zclzKQ8-6s",authDomain:"vistrit-whatsapp.firebaseapp.com",databaseURL:"https://vistrit-whatsapp.firebaseio.com",projectId:"vistrit-whatsapp",storageBucket:"vistrit-whatsapp.appspot.com",messagingSenderId:"712361611310",appId:"1:712361611310:web:c5e8bafd32d1b1c0dd8fbf",measurementId:"G-356D2RRKQN"}).firestore(),v=x.a.auth(),_=new x.a.auth.GoogleAuthProvider,g=f,N=Object(s.createContext)(),w=function(e){var t=e.reducer,a=e.initialState,n=e.children;return Object(c.jsx)(N.Provider,{value:Object(s.useReducer)(t,a),children:n})},S=function(){return Object(s.useContext)(N)};var y=function(){var e,t,a=Object(s.useState)(""),n=Object(o.a)(a,2),i=(n[0],n[1]),r=Object(s.useState)(""),j=Object(o.a)(r,2),f=j[0],v=j[1],_=Object(d.f)().roomId,N=Object(s.useState)(""),w=Object(o.a)(N,2),y=w[0],C=w[1],I=Object(s.useState)([]),k=Object(o.a)(I,2),E=k[0],R=k[1],D=S(),A=Object(o.a)(D,2),T=A[0].user;return A[1],Object(s.useEffect)((function(){return _&&(g.collection("rooms").doc(_).onSnapshot((function(e){C(e.data().name)})),g.collection("rooms").doc(_).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return R(e.docs.map((function(e){return e.data()})))}))),function(){}}),[_]),Object(s.useEffect)((function(){i(Math.floor(5e3*Math.random()))}),[]),Object(c.jsxs)("div",{className:"chat",children:[Object(c.jsxs)("div",{className:"chat__header",children:[Object(c.jsx)(l.a,{src:"https://avatars.dicebear.com/api/human/".concat(_,".svg")}),Object(c.jsxs)("div",{className:"chat__headerInfo",children:[Object(c.jsx)("h3",{children:y}),Object(c.jsxs)("p",{children:["Last seen at"," ",new Date(null===(e=E[E.length-1])||void 0===e||null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()]})]}),Object(c.jsxs)("div",{className:"chat__headerRight",children:[Object(c.jsx)(h.a,{children:Object(c.jsx)(b.a,{})}),Object(c.jsx)(h.a,{children:Object(c.jsx)(u.a,{})}),Object(c.jsx)(h.a,{children:Object(c.jsx)(m.a,{})})]})]}),Object(c.jsx)("div",{className:"chat__body",children:E.map((function(e){var t;return Object(c.jsxs)("p",{className:"chat__message ".concat(e.name===T.displayName&&"chat__receiver"),children:[Object(c.jsx)("span",{className:"chat__name",children:e.name}),e.message,Object(c.jsx)("span",{className:"chat__timestamp",children:new Date(null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()})]})}))}),Object(c.jsxs)("div",{className:"chat__footer",children:[Object(c.jsx)(O.a,{}),Object(c.jsxs)("form",{children:[Object(c.jsx)("input",{type:"text",placeholder:"Type a message",value:f,onChange:function(e){return v(e.target.value)}}),Object(c.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),g.collection("rooms").doc(_).collection("messages").add({message:f,name:T.displayName,timestamp:x.a.firestore.FieldValue.serverTimestamp()}),v("")},children:"Type a message"})]}),Object(c.jsx)(p.a,{})]})]})},C=a(49),I=a(97),k=(a(75),a(50)),E=a.n(k),R=a(43),D="SET_USER",A=function(e,t){switch(console.log(t),t.type){case D:return Object(R.a)(Object(R.a)({},e),{},{user:t.user});default:return e}};var T=function(){var e=S(),t=Object(o.a)(e,2);Object(C.a)(t[0]);var a=t[1];return Object(c.jsx)("div",{className:"login",children:Object(c.jsxs)("div",{className:"login__container",children:[Object(c.jsx)("div",{className:"login__text",children:Object(c.jsx)("h1",{children:"WhatsApp-Clone"})}),Object(c.jsxs)(I.a,{onClick:function(){v.signInWithPopup(_).then((function(e){a({type:D,user:e.user})})).catch((function(e){return console.log("error",e)}))},children:[Object(c.jsx)(E.a,{className:"mailIconLogin"}),"Sign In With Google"]})]})})},B=a(51),M=a.n(B),P=a(52),U=a.n(P),W=a(53),z=a.n(W);a(77),a(78);var L=function(e){var t,a=e.addNewChat,n=e.id,i=e.name,r=Object(s.useState)(""),d=Object(o.a)(r,2),h=(d[0],d[1]),b=Object(s.useState)(""),u=Object(o.a)(b,2),m=u[0],O=u[1];return Object(s.useEffect)((function(){n&&g.collection("rooms").doc(n).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return O(e.docs.map((function(e){return e.data()})))})),console.log(m)}),[n]),Object(s.useEffect)((function(){h(Math.floor(5e3*Math.random()))}),[]),a?Object(c.jsx)("div",{className:"sidebarChat",onClick:function(){var e=prompt("Please enter name for chat room");e&&g.collection("rooms").add({name:e})},children:Object(c.jsx)("h2",{children:"Add new Chat"})}):Object(c.jsx)(j.b,{to:"/rooms/".concat(n),children:Object(c.jsxs)("div",{className:"sidebarChat",children:[Object(c.jsx)(l.a,{src:"https://avatars.dicebear.com/api/human/".concat(n,".svg")}),Object(c.jsxs)("div",{className:"sidebarChat__info",children:[Object(c.jsx)("h2",{children:i}),Object(c.jsx)("p",{children:null===(t=m[0])||void 0===t?void 0:t.message})]})]})})};var G=function(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),a=t[0],n=t[1],i=S(),r=Object(o.a)(i,2),j=r[0].user;return r[1],Object(s.useEffect)((function(){var e=g.collection("rooms").onSnapshot((function(e){return n(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){e()}}),[]),Object(c.jsxs)("div",{className:"sidebar",children:[Object(c.jsxs)("div",{className:"sidebar__header",children:[Object(c.jsx)(l.a,{src:null===j||void 0===j?void 0:j.photoURL}),Object(c.jsxs)("div",{className:"sidebar__headerRight",children:[Object(c.jsx)(h.a,{children:Object(c.jsx)(M.a,{})}),Object(c.jsx)(h.a,{children:Object(c.jsx)(U.a,{})}),Object(c.jsx)(h.a,{children:Object(c.jsx)(z.a,{})})]})]}),Object(c.jsx)("div",{className:"sidebar__search",children:Object(c.jsxs)("div",{className:"sidebar__searchContainer",children:[Object(c.jsx)(b.a,{}),Object(c.jsx)("input",{placeholder:"Search or start new chat",type:"text"})]})}),Object(c.jsxs)("div",{className:"sidebar__chats",children:[Object(c.jsx)(L,{addNewChat:!0}),a.map((function(e){return Object(c.jsx)(L,{id:e.id,name:e.data.name},e.id)}))]})]})};var K=function(){var e=S(),t=Object(o.a)(e,2),a=t[0].user;return t[1],Object(c.jsx)("div",{className:"app",children:a?Object(c.jsx)("div",{className:"app__body",children:Object(c.jsxs)(j.a,{children:[Object(c.jsx)(G,{}),Object(c.jsxs)(d.c,{children:[Object(c.jsx)(d.a,{path:"/rooms/:roomId",children:Object(c.jsx)(y,{})}),Object(c.jsx)(d.a,{path:"/",children:Object(c.jsx)("div",{className:"app__body-emptyChat"})})]})]})}):Object(c.jsx)(T,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(w,{initialState:{user:null},reducer:A,children:Object(c.jsx)(K,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[79,1,2]]]);
//# sourceMappingURL=main.28011496.chunk.js.map